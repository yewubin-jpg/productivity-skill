# Productivity Skill v2.4 — 架构设计：有温度的智能教练

## 1. 核心问题分析 (v2.3 的不足)

v2.3 的评分引擎虽然智能，但仍然是**冷冰冰的**。它依赖用户的**主动输入**（“我感觉L3”），并且在推荐任务时缺乏**情感连接**。为了成为一个真正的“教练”，系统需要变得更**敏锐**、更**有同理心**。

## 2. v2.4 设计目标：从“工具”到“伙伴”

1.  **被动能量感知 (Passive Energy Sensing)**：在用户无感知的情况下，通过其行为信号初步判断能量状态。
2.  **普世价值观默认目标 (Default Goal System)**：在用户没有设定个人目标时，提供一个符合普世价值观的默认目标体系，让系统依然能做出有意义的判断。
3.  **激励与情绪价值系统 (Motivation & Emotional Value)**：让每一次交互都充满鼓励和情绪支持，而不只是冷冰冰的任务分配。

## 3. 架构实现

### 3.1. 被动能量感知系统

这是一个**双通道**能量评估系统，在 `energy_engine.md` 中实现。

*   **通道一：被动感知（优先）**
    *   **输入源**：用户的自然语言消息。
    *   **分析维度**：
        *   **情绪词汇分析**：检测消息中的正面（如“太棒了”、“搞定”）、负面（如“烦死了”、“做不完”）或中性词汇。
        *   **任务堆积量分析**：检查 `memory/inbox.md` 和清单中的未完成任务数量。数量过多会给能量分数一个负向修正值。
        *   **行为模式分析**：分析用户是否在短时间内频繁创建 C 类（临时记录）任务，这可能意味着思绪混乱，能量状态不佳。
    *   **输出**：一个**初步的、非精确的**能量等级预估（L1-L4）。

*   **通道二：主动确认（后备）**
    *   **触发条件**：当被动感知的信号不足或相互矛盾时。
    *   **行为**：回归 v2.3 的方式，直接询问用户：“为了更准确地为您推荐，您能告诉我您现在的能量状态在哪个级别吗？”

### 3.2. 普世价值观默认目标体系

在 `goal_engine.md` 中定义一个默认目标结构。当 `memory/goals.md` 为空或用户从未进行过“水滴520”目标设定时，优先级引擎将调用此默认体系。

**默认目标优先级排序**：

1.  **健康 (Health & Wellbeing)**：与身心健康相关的任务（如锻炼、冥想、休息）。
2.  **事业 (Career & Growth)**：与工作、学习、个人成长相关的任务。
3.  **关系 (Relationships)**：与家庭、朋友、社交相关的任务。
4.  **财富 (Wealth & Finance)**：与财务管理、投资相关的任务。

在计算**目标分数 (Goal Score)** 时，任务关联到“健康”的得分最高，依次递减。

### 3.3. 激励与情绪价值系统

创建一个全新的规则文件 `references/motivation_engine.md`。该引擎不参与分数计算，而是在**推荐任务之后**被调用，用于包装和传递推荐内容。

**引擎规则**：根据不同情景，选择不同的激励话术模板。

| 情景 | 激励策略 | 话术示例 |
| :--- | :--- | :--- |
| **推荐高分任务** | **赋予意义，激发动力** | “根据您的状态，现在是挑战‘[任务名]’的绝佳时机。完成它将使您在‘[目标名]’上迈进一大步。让我们开始吧！” |
| **用户能量低落** | **表达关怀，降低门槛** | “我感觉到您有些疲惫。没关系，我们先从一个简单的任务开始，比如‘[低分任务名]’，只需要5分钟。或者，现在是休息的最佳时机。” |
| **完成一项任务后** | **及时认可，强化正反馈** | “太棒了！您刚刚完成了一项重要任务。这是向您的目标迈出的坚实一步。现在，让我们稍作休息，再迎接下一个挑战。” |
| **面对困难任务** | **分解压力，提供支持** | “我知道‘[任务名]’看起来有些棘手。别担心，我们可以用 PNAS 方法把它分解成小步骤。第一步是... 我们可以一起完成。” |

## 4. 实施计划

1.  **重写 `energy_engine.md`**：实现被动感知与主动确认的双通道系统。
2.  **重写 `goal_engine.md`**：加入普世价值观默认目标体系。
3.  **创建 `motivation_engine.md`**：定义各种情景下的激励话术和情绪支持策略。
4.  **更新 `skill.md`**：在主工作流中，调用 `motivation_engine` 来包装最终的推荐结果。
5.  **更新 `priority_engine.md`**：修改目标分数计算逻辑，使其在用户无目标时能调用默认体系。
6.  **更新 `README.md`**：突出 v2.4 的“情感智能”和“教练温度”。

这次升级将使技能超越一个纯粹的逻辑工具，成为一个能够理解、适应并激励用户的“有温度的伙伴。
